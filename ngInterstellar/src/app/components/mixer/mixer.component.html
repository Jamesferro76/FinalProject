<body>
<!-- Toggle Buttons -->
<button *ngIf="initialCreate &&!selected" (click)="toggleAdd()">Add Mixer</button>
<button *ngIf="displaySearch&&!selected" (click)="openPopupSearch()">Search Mixers</button>

<!-- Shows how to add a form -->
<div class="form-style-8" *ngIf="!selected && !initialCreate" >
    <div class="container">
      <div class="row">
        <div class ="box-item col-md-12">
          <div class ="flip-box">
            <div class ="flip-box-front-edit text-center" style="background-image:url({{newMixer.imageUrl}});">
              <div class="inner color-white">
                <h3 class ="flip-box-header"> {{newMixer.name}}</h3>
                <p>{{newMixer.eventDate}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class ="box-item col-md-12">
          <div class ="flip-box">
            <div class="flip-box-back-edit text-center" style="background-image:url({{newMixer.imageUrl}});">
              <div class="inner color-white">
                <h3 class ="flip-box-header-back"> {{newMixer.description}}</h3>
                <p>{{newMixer.eventDate}}</p>
                <p>{{newMixer.eventStart}}</p>
                <p>{{newMixer.eventEnd}}</p>
                <p>{{newMixer.address.street}}, {{newMixer.address.city}} {{newMixer.address.state}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <form>
      <input type="text" name="name" placeholder="Name"[(ngModel)]="newMixer.name"><br>
      <input type="text" name="description" placeholder="description"[(ngModel)]="newMixer.description"><br>
      <input type="text" name="imageUrl" placeholder="imageUrl"[(ngModel)]="newMixer.imageUrl"><br>
      <input type="date" name="eventDate" placeholder="eventDate"[(ngModel)]="newMixer.eventDate"><br>
      <input type="time" name="eventStart" placeholder="eventStart"[(ngModel)]="newMixer.eventStart"><br>
      <input type="time" name="eventEnd" placeholder="eventEnd"[(ngModel)]="newMixer.eventEnd"><br>
      <input type="text" name="street" placeholder="Street"[(ngModel)]="newMixer.address.street"><br>
      <input type="text" name="city" placeholder="City"[(ngModel)]="newMixer.address.city"><br>
      <input type="text" name="state" placeholder="State"[(ngModel)]="newMixer.address.state"><br>
      <input type="text" name="zip" placeholder="Zip Code"[(ngModel)]="newMixer.address.zip"><br>
      <input type="text" name="country" placeholder="Country"[(ngModel)]="newMixer.address.country"><br>
      <button (click)="addMixer()">Add Mixer</button>
      <button (click)="toggleAdd()">Back</button>
      </form>
  </div>

<!-- Shows all mixers -->
<div *ngIf="!selected && displayAll" >
  <div class="container-fluid">
    <div class="row row-cols-1 row-cols-md-3 g-{{getNumberOfMixers()}}">

      <!-- <div *ngFor="let mixer of mixers"> -->
      <div *ngFor="let mixer of displayMixers">
      <div class ="box-item">
        <div class ="flip-box" (click)="displayMixer(mixer); selected = mixer">
          <div class ="flip-box-front text-center" style="background-image:url({{mixer.imageUrl}});">
            <div class="inner color-white">
              <h3 class ="flip-box-header"> {{mixer.name}}</h3>
              <p>{{mixer.eventDate}}</p>
            </div>
          </div>
          <div class="flip-box-back text-center" style="background-image:url({{mixer.imageUrl}});">
            <div class="inner color-white">
              <div class ="flip-box-header-back"> {{mixer.description}}</div>
              <p>{{mixer.eventDate}}</p>
              <p>{{mixer.eventStart}}</p>
              <p>{{mixer.eventEnd}}</p>
              <p>{{mixer.address.street}}, {{mixer.address.city}} {{mixer.address.state}}</p>
              <button class ="flip-box-button">Show More</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>



<!-- Edits a Mixer -->
<form class="form-style-8" *ngIf="editMixer">
  <div class="container">
    <div class="row">
      <div class ="box-item col-md-12">
        <div class ="flip-box">
          <div class ="flip-box-front-edit text-center" style="background-image:url({{editMixer.imageUrl}});">
          <div class="inner color-white">
            <h3 class ="flip-box-header"> {{editMixer.name}}</h3>
            <p>{{editMixer.eventDate}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class ="box-item col-md-12">
      <div class ="flip-box">
        <div class="flip-box-back-edit text-center" style="background-image:url({{editMixer.imageUrl}});">
          <div class="inner color-white">
            <h3 class ="flip-box-header-back"> {{editMixer.description}}</h3>
            <p>{{editMixer.eventDate}}</p>
            <p>{{editMixer.eventStart}}</p>
            <p>{{editMixer.eventEnd}}</p>
            <p>{{editMixer.address.street}}, {{editMixer.address.city}} {{editMixer.address.state}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div><br><br>
<label>Name: </label> <input type="text" name="name" [(ngModel)]="editMixer.name">
<label>Description: </label> <input type="text" name="decription" [(ngModel)]="editMixer.description">
<label>Photo: </label> <input type="text" name="imageUrl" [(ngModel)]="editMixer.imageUrl">
<label>Date: </label> <input type="date" name="eventDate" [(ngModel)]="editMixer.eventDate">
<label>Start Time: </label> <input type="time" name="eventStart" [(ngModel)]="editMixer.eventStart">
<label>End Time: </label> <input type="time" name="eventEnd" [(ngModel)]="editMixer.eventEnd">
<label>Street: </label> <input type="text" name="street" [(ngModel)]="editMixer.address.street">
<label>City: </label> <input type="text" name="city" [(ngModel)]="editMixer.address.city">
<label>State: </label> <input type="text" name="state" [(ngModel)]="editMixer.address.state">
<label>Zip: </label> <input type="text" name="zip" [(ngModel)]="editMixer.address.zip">
<label>Country: </label> <input type="text" name="country" [(ngModel)]="editMixer.address.country"><br>
<button (click)="editMixer = null">Cancel</button>
<button (click)="updateMixer(editMixer)">Save</button>
</form>




  <div class="header__wrapper" *ngIf="selected && !editMixer">
    <header></header>
    <div class="cols__container">
      <div class="left__col">
        <div class="img__container">
          <img [src]="selected.imageUrl"/>
          <span></span>
        </div>
        <h2>{{selected.name}} </h2>
        <p>{{selected.eventDate}}</p>
        <div class="content">
          <p>
            {{ selected.description }}
          </p>
          Rate this Mixer!
          <ul>
            <a href="http://54.176.46.29:8080/PerfectDate/#/home" target="_blank">
              <img class ="rateDate" src="http://54.176.46.29:8080/PerfectDate/assets/images/HomeButton.png" alt="" width="40" height="40">
            </a>
            <button (click)="setEditMixer()">Edit</button>
            <button (click)="joinMixer(selected)">Join Mixer!</button>

          </ul>
        </div>
      </div>
      <div class="right__col">
        <nav>
          <ul>
            <li><a (click)="detailsLinkToggle()">details</a></li>
          </ul>
        </nav>
        <div *ngIf="showDetails" class="details">
          <div>
              <p>Date: {{selected.eventDate}} </p>
               <p>Start Time: {{selected.eventStart}}</p>
              <p>End Time: {{selected.eventEnd}}</p>
              <p>Where: {{selected.address.city}}, {{ selected.address.state }}</p>
              <p>Address: {{selected.address.city}}, {{ selected.address.state }}</p>
              <p> {{selected.address.zip}} {{selected.address.country}}</p>
          </div>
        </div>
      </div>
    </div>
    <span (click)="displayTable()" class="material-symbols-outlined">
      arrow_back
      </span>
  </div>
</body>

<!-- Modal -->

<div
  class="modal"
  tabindex="-1"
  role="dialog"
  [ngStyle]="{'display':displayStyleSearch}">


  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Filter</h4>
      </div>
      <div class="modal-body">
        State:<select name="state" [(ngModel)]="selectedState">
          <option *ngFor="let state of stateAbr2" [ngValue]="state" value="{{state}}">{{state}}</option>
        </select><br>
        City:<select name="city" [(ngModel)]="selectedCity">
          <option *ngFor="let city of cityList" [ngValue]="city" value="{{city}}">{{city}}</option>
        </select><br>

      </div>

      <div class="modal-footer">
        <button type="button" class=""(click)="closePopupSearch()">
          Close
        </button>
        <button (click)="getMixerList()">Search</button>
      </div>
    </div>
  </div>
</div>
